import"./constant-1e5ebc02.js";import{V as I,v as B,a as R,b as P,c as K,d as M}from"./ValidCode-b106c7c2.js";import{_ as T,E as c,j as v,r as u,o as L,c as N,a as w,b as e,w as o,n as F,d as W,e as h,p as j,f as z}from"./index-e172b211.js";const V=(a,r,s)=>{if(r)if(B(r))s();else return s(new Error("电话号码格式不正确"));else return s(new Error("电话号码不能为空"))},y=(a,r,s)=>{if(r)if(R(r))s();else return s(new Error("用户名格式不正确：仅能出现英⽂字符、数字与下划线；用户名长度为3-10"));else return s(new Error("用户名不能为空"))},C=(a,r,s)=>{if(r)if(P(r))s();else return s(new Error("身份证号格式不正确"));else return s(new Error("身份证号不能为空"))},E=(a,r,s)=>{if(r)if(K(r))s();else return s(new Error("邮箱格式不正确"));else return s(new Error("邮箱不能为空"))},b=(a,r,s)=>{if(r)if(M(r))s();else return s(new Error("格式不正确:密码⻓度为6-32个字符; 字⺟，数字或者特殊字符（-_）⾄少包含两种"));else return s(new Error("密码不能为空"))},D={name:"Register",components:{ValidCode:I},data(){var a=(s,d,t)=>{d||t(new Error("确认密码不能为空!")),d!==this.form.password?t(new Error("两次输入密码不一致!")):t()},r=(s,d,t)=>{d||t(new Error("验证码不能为空")),this.form.validCode.toLowerCase()===this.validCode.toLowerCase()?t():t(new Error("验证码错误!"))};return{form:{usertype:"",username:"",password:"",phone:"",idnum:"",email:"",agreement:"",validCode:"",dialogFormVisible:!1},validCode:"",rules:{username:[{required:!0,validator:y,trigger:"change"},{required:!0,validator:y,trigger:"blur"}],usertype:[{required:!0,trigger:"change"},{required:!0,trigger:"blur"}],phone:[{required:!0,validator:V,trigger:"change"},{required:!0,validator:V,trigger:"blur"}],idnum:[{required:!0,validator:C,trigger:"change"},{required:!0,validator:C,trigger:"blur"}],email:[{required:!0,validator:E,trigger:"change"},{required:!0,validator:E,trigger:"blur"}],password:[{required:!0,validator:b,trigger:"change"},{required:!0,validator:b,trigger:"blur"}],password2:[{required:!0,validator:a,trigger:"change"},{required:!0,validator:a,trigger:"blur"}],validCode:[{required:!0,validator:r,trigger:"change"},{required:!0,validator:r,trigger:"blur"}]}}},methods:{login:function(){this.$router.push({name:"Login"})},register:function(a){this.$refs[a].validate(r=>{if(console.log(this.form.usertype),this.form.agreement==""){this.$message.error("必须同意用户协议");return}if(this.form.usertype==""){this.$message.error("请选择用户类型");return}r?(this.form.usertype=="普通用户"?this.form.usertype=window.USER:this.form.usertype=window.SHOPKEEPER,this.$axios.post("/userRegister",{username:this.form.username,password:this.form.password,usertype:Number(this.form.usertype),phone:this.form.phone,idnum:this.form.idnum,email:this.form.email}).then(s=>{if(s.data.state==window.SUCCESS){var d=window.localStorage;d.setItem("username",this.form.username),d.setItem("usertype",this.form.usertype),this.$message.success("注册成功!   欢迎您："+d.getItem("username")),setTimeout(()=>{this.form.usertype==window.USER?this.$router.push({name:"UserWeb"}):this.$router.push({name:"ShopkeeperWeb"})},1e3)}else{const m=s.data.message.replace(/&$/,"").split("&");for(let g of m)this.$message.error(g)}}).catch(s=>{console.log(s)})):this.$message.error("注册失败，请按照要求填写所有信息")})},reset:function(){c.confirm("你确定要重置输入信息吗","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v({type:"success",message:"已成功重置"}),this.confirmReset()}).catch(()=>{v({type:"info",message:"已取消"})})},open_agreements:function(){c({title:"用户守则",message:"我们团队竭诚为您提供服务，确保您对我们的产品更满意、工作更加高效。我们通过提供必要的应用程序努力为您缔造完美体验，确保您的信息安全，并完全公开我们的数据处理方式。同样，我们也请您尊重 Evernote Service 及其他用户，并遵守有关使用Lysw's Mall服务期间禁止事项的相关规定。请记住，当您同意服务条款（包括这些准则）时，即表示您同意为您帐户下的任何或所有行为及内容负责。",confirmButtonText:"确定"})},createValidCode(a){this.validCode=a},setPreference(){c({title:"用户守则",message:"我们团队竭诚为您提供服务，确保您对我们的产品更满意、工作更加高效。我们通过提供必要的应用程序努力为您缔造完美体验，确保您的信息安全，并完全公开我们的数据处理方式。同样，我们也请您尊重 Evernote Service 及其他用户，并遵守有关使用Lysw's Mall服务期间禁止事项的相关规定。请记住，当您同意服务条款（包括这些准则）时，即表示您同意为您帐户下的任何或所有行为及内容负责。",confirmButtonText:"确定"})},handleClear(){this.$message.success("触发函数"),this.form.username=""},confirmReset(){this.$refs.form.resetFields(),this.form.usertype="",this.form.agreement=""}}},H=a=>(j("data-v-e76c48db"),a=a(),z(),a),O={id:"register",class:"register"},A={class:"wrap"},G=H(()=>w("h1",null,"注 册",-1));function J(a,r,s,d,t,m){const g=u("el-radio"),x=u("el-radio-group"),n=u("el-form-item"),p=u("el-input"),i=u("el-col"),f=u("el-row"),q=u("ValidCode"),U=u("el-checkbox"),_=u("el-button"),S=u("el-form");return L(),N("div",O,[w("div",A,[G,e(S,{model:t.form,rules:t.rules,ref:"form",class:"form"},{default:o(()=>[e(n,{label:"用户类型选择",class:"typechoose"},{default:o(()=>[e(x,{modelValue:t.form.usertype,"onUpdate:modelValue":r[0]||(r[0]=l=>t.form.usertype=l)},{default:o(()=>[e(g,{label:"普通用户",value:"2"}),e(g,{label:"商户",value:"1"})]),_:1},8,["modelValue"])]),_:1}),e(f,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(n,{inline:"true",prop:"username"},{default:o(()=>[e(p,{placeholder:"用户名",type:"username",modelValue:t.form.username,"onUpdate:modelValue":r[1]||(r[1]=l=>t.form.username=l),autocomplete:"off",clearable:"","prefix-icon":"User"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:o(()=>[e(n,{prop:"phone"},{default:o(()=>[e(p,{placeholder:"手机号",type:"phone",modelValue:t.form.phone,"onUpdate:modelValue":r[2]||(r[2]=l=>t.form.phone=l),autocomplete:"off",clearable:"","prefix-icon":"Iphone"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(n,{prop:"idnum"},{default:o(()=>[e(p,{placeholder:"身份证号",type:"idnum",modelValue:t.form.idnum,"onUpdate:modelValue":r[3]||(r[3]=l=>t.form.idnum=l),autocomplete:"off",clearable:"","prefix-icon":"Postcard"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:o(()=>[e(n,{prop:"email"},{default:o(()=>[e(p,{placeholder:"邮箱",type:"email",modelValue:t.form.email,"onUpdate:modelValue":r[4]||(r[4]=l=>t.form.email=l),autocomplete:"off",clearable:"","prefix-icon":"Message"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(n,{prop:"password",class:F({"input-error":a.isPasswordError})},{default:o(()=>[e(p,{placeholder:"密码","show-password":"",type:"password",modelValue:t.form.password,"onUpdate:modelValue":r[5]||(r[5]=l=>t.form.password=l),autocomplete:"off",clearable:"","prefix-icon":"Key"},null,8,["modelValue"])]),_:1},8,["class"])]),_:1}),e(i,{span:12},{default:o(()=>[e(n,{prop:"password2"},{default:o(()=>[e(p,{placeholder:"确认密码","show-password":"",type:"password",modelValue:t.form.password2,"onUpdate:modelValue":r[6]||(r[6]=l=>t.form.password2=l),autocomplete:"off",clearable:"","prefix-icon":"Key",onKeyup:W(m.register,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:o(()=>[e(n,{prop:"validCode"},{default:o(()=>[e(p,{modelValue:t.form.validCode,"onUpdate:modelValue":r[7]||(r[7]=l=>t.form.validCode=l),placeholder:"验证码","prefix-icon":"MessageBox"},null,8,["modelValue"])]),_:1}),e(q,{onInput:m.createValidCode},null,8,["onInput"])]),_:1}),e(f,null,{default:o(()=>[e(n,{class:"btn_agreement"},{default:o(()=>[e(i,{span:12},{default:o(()=>[e(U,{modelValue:t.form.agreement,"onUpdate:modelValue":r[8]||(r[8]=l=>t.form.agreement=l),label:"我已阅读并同意遵守",value:"agreed"},null,8,["modelValue"])]),_:1}),e(i,{span:12},{default:o(()=>[e(_,{text:"",onClick:m.open_agreements},{default:o(()=>[h("《用户守则》")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:o(()=>[e(i,{span:12},{default:o(()=>[e(n,{class:"btn_register"},{default:o(()=>[e(_,{type:"primary",onClick:r[9]||(r[9]=l=>m.register("form")),disabled:a.isSubmitDisabled},{default:o(()=>[h("注  册")]),_:1},8,["disabled"])]),_:1})]),_:1}),e(i,{span:12},{default:o(()=>[e(n,{class:"btn_reset"},{default:o(()=>[e(_,{type:"primary",onClick:m.reset},{default:o(()=>[h("重  置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:o(()=>[e(n,null,{default:o(()=>[w("a",{class:"goto",onClick:r[10]||(r[10]=(...l)=>m.login&&m.login(...l))},"已有账号？去登录")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}const Z=T(D,[["render",J],["__scopeId","data-v-e76c48db"]]);export{Z as default};
