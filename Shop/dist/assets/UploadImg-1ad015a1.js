import{_ as h,r as l,o,c as i,a as n,b as r,w as d,e as c,t as p,F as _,i as g}from"./index-e172b211.js";const F={data(){return{file:"@/assets/logo.png",formData:null}},methods:{handleFileUpload(e){this.file=e.target.files[0],console.log(this.file.name)},uploadFile(){this.formData=new FormData,this.formData.append("file",this.file);const e=new XMLHttpRequest;e.open("POST","/api/upload"),e.send(this.formData)},beforeUpload(e){return this.file=e.name,console.log(e.name),this.$message.success(this.file),this.$axios.post("/setUserAvatar",{username:localStorage.getItem("username"),avatar:this.file}).then(a=>{a.data==3&&this.$message.success("上传成功")}),!1}}},x=["src"];function D(e,a,U,b,k,t){const u=l("Plus"),f=l("el-icon"),m=l("el-upload");return o(),i(_,null,[n("div",null,[n("input",{type:"file",onChange:a[0]||(a[0]=(...s)=>t.handleFileUpload&&t.handleFileUpload(...s))},null,32),n("button",{onClick:a[1]||(a[1]=(...s)=>t.uploadFile&&t.uploadFile(...s))},"上传文件")]),r(m,{action:/assets/,"before-upload":t.beforeUpload},{default:d(()=>[this.file?(o(),i("img",{key:0,src:require(this.file)},null,8,x)):(o(),g(f,{key:1,class:"avatar-uploader-icon"},{default:d(()=>[r(u)]),_:1})),c(" "+p(this.file),1)]),_:1},8,["before-upload"]),c(" "+p(this.formData),1)],64)}const w=h(F,[["render",D]]);export{w as default};
