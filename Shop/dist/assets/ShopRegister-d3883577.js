import{V as k,b as I}from"./ValidCode-b106c7c2.js";import"./constant-1e5ebc02.js";import{_ as U,E as b,j as V,r as i,o as B,c as D,b as e,w as o,n as _,e as h,p as R,f as M,a as y}from"./index-e172b211.js";const C=(t,r,d)=>{if(r)if(I(r))d();else return d(new Error("身份证号格式不正确"));else return d(new Error("身份证号不能为空"))},T={name:"Register",components:{ValidCode:k},data(){var t=(r,d,m)=>{d||m(new Error("验证码不能为空")),this.form.validCode.toLowerCase()===this.validCode.toLowerCase()?m():m(new Error("验证码错误!"))};return{form:{goodstype:[],shopname:"",introduction:"",address:"",idnum:"",capital:"",date:new Date,username:"",agreement:"",validCode:""},validCode:"",rules:{shopname:[{required:!0,message:"店铺名不能为空",trigger:"blur"},{required:!0,message:"店铺名不能为空",trigger:"change"},{required:!0,max:12,message:"店铺名不能超过12个字",trigger:"blur"},{required:!0,max:12,message:"店铺名不能超过12个字",trigger:"change"}],goodstype:[{required:!0,type:"array",min:1,message:"请至少选择一个选项",trigger:"blur"}],idnum:[{required:!0,validator:C,trigger:"change"},{required:!0,validator:C,trigger:"blur"}],introduction:[{required:!0,message:"店铺简介不能为空",trigger:"blur"},{required:!0,message:"店铺简介不能为空",trigger:"change"},{required:!0,max:128,message:"店铺简介不能超过128个字",trigger:"blur"},{required:!0,max:128,message:"店铺简介不能超过128个字",trigger:"change"}],address:[{required:!0,message:"备案地址不能为空",trigger:"blur"},{required:!0,message:"备案地址不能为空",trigger:"change"},{required:!0,max:32,message:"备案地址不能超过32个字",trigger:"blur"},{required:!0,max:32,message:"备案地址不能超过32个字",trigger:"change"}],captial:[{type:"number",min:1e3,message:"注册资金小于1000",trigger:"change"}],validCode:[{required:!0,validator:t,trigger:"change"},{required:!0,validator:t,trigger:"blur"}]}}},methods:{register:function(t){this.$refs[t].validate(r=>{if(this.form.agreement==""){this.$message.error("必须同意店铺守则");return}if(r){var d=window.localStorage;console.log(this.form),this.$axios.post("/shopRegister",{shopname:this.form.shopname,goodstype:this.form.goodstype.join(";"),idnum:this.form.idnum,introduction:this.form.introduction,address:this.form.address,capital:this.form.capital.toString(),date:this.formatDate(),username:d.getItem("username")}).then(m=>{if(m.data.state==window.SUCCESS){this.$message.success("注册成功，请耐心等待管理员审批");var a=window.localStorage;a.setItem("shopname",m.data.data.shopname),setTimeout(()=>{this.$router.push({name:"ShopDashboardBlank"})},1e3)}else this.$message.error(m.data.message)}).catch(m=>{console.log(m)})}else this.$message.error("注册失败，请按照要求填写所有信息")})},reset:function(){b.confirm("你确定要重置输入信息吗","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{V({type:"success",message:"已成功重置"}),this.confirmReset()}).catch(()=>{V({type:"info",message:"已取消"})})},confirmReset(){this.$refs.form.resetFields(),this.form.agreement=""},shop_agreements:function(){b({title:"店铺守则",message:"我们团队竭诚为您提供服务，确保您对我们的产品更满意、工作更加高效。我们通过提供必要的应用程序努力为您缔造完美体验，确保您的信息安全，并完全公开我们的数据处理方式。同样，我们也请您尊重 Evernote Service 及其他商家，并按照法律规定合法经营，禁止在本平台恶意竞争、倒卖非法物资等。请记住，当您同意服务条款（包括这些准则）时，即表示您同意为您帐户下的任何或所有行为及内容负责。",confirmButtonText:"确定"})},createValidCode(t){this.validCode=t},formatDate(){const t=this.form.date.getFullYear(),r=this.addZero(this.form.date.getMonth()+1),d=this.addZero(this.form.date.getDate());return`${t}-${r}-${d}`},addZero(t){return t<10?`0${t}`:t}}},v=t=>(R("data-v-eceaeb8d"),t=t(),M(),t),N={id:"register",class:"register"},Z=v(()=>y("h1",null,"店 铺 注 册",-1)),j=v(()=>y("span",{class:"input-requirement"},"启动资金不能少于1000，且保留2位小数 ",-1));function F(t,r,d,m,a,p){const u=i("el-input"),n=i("el-form-item"),s=i("el-checkbox"),x=i("el-checkbox-group"),w=i("el-input-number"),q=i("el-date-picker"),S=i("ValidCode"),c=i("el-row"),f=i("el-col"),g=i("el-button"),E=i("el-form");return B(),D("div",N,[Z,e(E,{model:a.form,rules:a.rules,ref:"form",class:"form"},{default:o(()=>[e(n,{prop:"shopname",class:_({"input-error":t.isShopnameError})},{default:o(()=>[e(u,{placeholder:"店名（不超过12个字）",type:"shopname",modelValue:a.form.shopname,"onUpdate:modelValue":r[0]||(r[0]=l=>a.form.shopname=l),autocomplete:"off","prefix-icon":"House",Clearable:""},null,8,["modelValue"])]),_:1},8,["class"]),e(n,{label:"商品类别",prop:"goodstype"},{default:o(()=>[e(x,{modelValue:a.form.goodstype,"onUpdate:modelValue":r[1]||(r[1]=l=>a.form.goodstype=l)},{default:o(()=>[e(s,{label:"电脑数码",name:"digitalproduct"}),e(s,{label:"家用电器",name:"householdappliances"}),e(s,{label:"运动户外",name:"sports"}),e(s,{label:"服饰鞋包",name:"clothing"}),e(s,{label:"个护化妆",name:"makeups"}),e(s,{label:"母婴用品",name:"babyproduct"}),e(s,{label:"日用百货",name:"dailynecessities"}),e(s,{label:"食品生鲜",name:"food"}),e(s,{label:"配饰腕表",name:"accessory"}),e(s,{label:"图书音像",name:"book"}),e(s,{label:"玩模乐器",name:"instrument"}),e(s,{label:"办公设备",name:"officeequipment"}),e(s,{label:"家居家装",name:"furniture"}),e(s,{label:"汽车消费",name:"car"}),e(s,{label:"艺术收藏",name:"art"}),e(s,{label:"其他",name:"others"})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"idnum"},{default:o(()=>[e(u,{placeholder:"身份证号",type:"idnum",modelValue:a.form.idnum,"onUpdate:modelValue":r[2]||(r[2]=l=>a.form.idnum=l),autocomplete:"off","prefix-icon":"Postcard",Clearable:""},null,8,["modelValue"])]),_:1}),e(n,{prop:"introduction",class:_({"input-error":t.isIntroductionError})},{default:o(()=>[e(u,{placeholder:"店铺简介",type:"introduction",modelValue:a.form.introduction,"onUpdate:modelValue":r[3]||(r[3]=l=>a.form.introduction=l),autocomplete:"off","prefix-icon":"House",Clearable:""},null,8,["modelValue"])]),_:1},8,["class"]),e(n,{prop:"address",class:_({"input-error":t.isAddressError})},{default:o(()=>[e(u,{placeholder:"备案地址",type:"address",modelValue:a.form.address,"onUpdate:modelValue":r[4]||(r[4]=l=>a.form.address=l),autocomplete:"off","prefix-icon":"Position",Clearable:""},null,8,["modelValue"])]),_:1},8,["class"]),e(n,{label:"启动资金",prop:"capital"},{default:o(()=>[e(w,{label:"启动资金",modelValue:a.form.capital,"onUpdate:modelValue":r[5]||(r[5]=l=>a.form.capital=l),controls:!1,precision:2,min:1e3,"prefix-icon":"Money",Clearable:""},null,8,["modelValue"]),j]),_:1}),e(n,{label:"注册日期",prop:"date"},{default:o(()=>[e(q,{modelValue:a.form.date,"onUpdate:modelValue":r[6]||(r[6]=l=>a.form.date=l),type:"date",readonly:"","default-value":new Date},null,8,["modelValue","default-value"])]),_:1}),e(c,null,{default:o(()=>[e(n,{prop:"validCode"},{default:o(()=>[e(u,{modelValue:a.form.validCode,"onUpdate:modelValue":r[7]||(r[7]=l=>a.form.validCode=l),placeholder:"验证码","prefix-icon":"MessageBox"},null,8,["modelValue"])]),_:1}),e(S,{onInput:p.createValidCode},null,8,["onInput"])]),_:1}),e(c,null,{default:o(()=>[e(f,{span:12},{default:o(()=>[e(n,{class:"btn_agreement"},{default:o(()=>[e(s,{modelValue:a.form.agreement,"onUpdate:modelValue":r[8]||(r[8]=l=>a.form.agreement=l),prop:"agreement",label:"我已阅读并同意遵守",value:"agreed"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:12},{default:o(()=>[e(n,{class:"btn_agreement"},{default:o(()=>[e(g,{onClick:p.shop_agreements},{default:o(()=>[h("《店铺守则》")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:o(()=>[e(f,{span:12},{default:o(()=>[e(n,{class:"btn"},{default:o(()=>[e(g,{type:"primary",onClick:r[9]||(r[9]=l=>p.register("form")),disabled:t.isSubmitDisabled},{default:o(()=>[h("注  册")]),_:1},8,["disabled"])]),_:1})]),_:1}),e(f,{span:12},{default:o(()=>[e(n,{class:"btn"},{default:o(()=>[e(g,{type:"primary",onClick:p.reset},{default:o(()=>[h("重  置")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])])}const z=U(T,[["render",F],["__scopeId","data-v-eceaeb8d"]]);export{z as default};
